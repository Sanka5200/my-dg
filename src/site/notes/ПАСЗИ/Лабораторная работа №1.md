---
{"dg-publish":true,"permalink":"/paszi/laboratornaya-rabota-1/","noteIcon":""}
---

# Linux permissions

---

**ФИО:** 2022-ФГиИБ-ИБ-1б Кубицкий Александр Андреевич

---
### 1. Создание пользователей

Создание пользователей `user1`, `user2`, `user3` и паролей для них
![Pasted image 20250217121105.png](/img/user/Images/Pasted%20image%2020250217121105.png)

Проверка, что пользователи и домашние директории были созданы. Проверка групп, которым принадлежат пользователи.
![Pasted image 20250217121638.png](/img/user/Images/Pasted%20image%2020250217121638.png)
 Цифры, 1000, 1001, 1002, 1003 после x обозначают уникальный идентификатор и идентификатор группы "UID" и "GID".
 
![Pasted image 20250217122708.png](/img/user/Images/Pasted%20image%2020250217122708.png)
Алгоритм хеширования - `sha512crypt`

Создание группы `double` и добавление пользователей в группу
![Pasted image 20250217123105.png](/img/user/Images/Pasted%20image%2020250217123105.png)

Проверяем, каким группам принадлежат пользователи.
![Pasted image 20250217125227.png](/img/user/Images/Pasted%20image%2020250217125227.png)

Проверяем, каким группам принадлежат пользователи (тоже).
![Pasted image 20250217125306.png](/img/user/Images/Pasted%20image%2020250217125306.png)

### 2. Разрешения
Смотрим разрешения на чтение `file1` текущим `user1`, предварительно создав его
![Pasted image 20250217131446.png](/img/user/Images/Pasted%20image%2020250217131446.png)

Отбираем права на чтения файла `file1` `user1` у пользователей вне группы `double`, в которой состоит `user1` (поэксперементировал)
![Pasted image 20250217132427.png](/img/user/Images/Pasted%20image%2020250217132427.png)

Даём всем пользователям вне группы `double` права на чтение и запись. Можно давать 1+ права одновременно, Alpine позволяет так делать. Также отбираем права на чтение и запись у пользователей группы `double`. Проверяем права от лица `user1`
![Pasted image 20250217132655.png](/img/user/Images/Pasted%20image%2020250217132655.png)

Создаём файлы `file2` `file3` `file4` в директории `dir1`, проверяем права `rwx` от лица `user1`.
![Pasted image 20250217133303.png](/img/user/Images/Pasted%20image%2020250217133303.png)

Заходим в `dir1`, проверяем права на чтение файлов. Выдаём права на чтение и запись в директории пользователям вне группы `double`, отбираем у пользователей в группе `double`.
![Pasted image 20250217134044.png](/img/user/Images/Pasted%20image%2020250217134044.png)

Те же действия проводим в самой директории `dir1` с файлами по отдельности. Проверяем права `rwx` от лица `user1`.
![Pasted image 20250217134241.png](/img/user/Images/Pasted%20image%2020250217134241.png)

Пишем маленький скриптик на питоне, который выводит ***hello world***.
![Pasted image 20250217141111.png](/img/user/Images/Pasted%20image%2020250217141111.png)

Смотрим на наполнение `.sh` файла и запускаем скрипт без вызова интерпретатора.
![Pasted image 20250224122833.png](/img/user/Images/Pasted%20image%2020250224122833.png)

Скрипт запускается, так как файл `new_file.sh` использует оболочку `sh` для запуска команды `python3`, которая пропускает через себя файл `python1.py`.
### 3. Специальные разрешения
О команде `chmod 4762` (согласно источнику https://chmodcommand.com/chmod-4762/)
Для файлов -- после изменения режима файла на 4762 режим файла будет отображаться в списке файлов в стиле Unix как: `-rwsrw--w-`.
Для папок -- после изменения режима каталога на 4762 режим папки будет отображаться в списке файлов в стиле Unix как: `drwsrw--w-`.

Заходим под `user1` в директорию `dir1`, создаём 2 скрипта
![Pasted image 20250224124113.png](/img/user/Images/Pasted%20image%2020250224124113.png)

Рекурсивно устанавливаем `UID`, `GID` и `Sticky Bit`
![Pasted image 20250224131306.png](/img/user/Images/Pasted%20image%2020250224131306.png)

Используем `chmod -R -x` на всю домашнюю директорию
![Pasted image 20250224132126.png](/img/user/Images/Pasted%20image%2020250224132126.png)

Даём права пользователям вне группы читать и изменять `dir1ir1`
![Pasted image 20250224131624.png](/img/user/Images/Pasted%20image%2020250224131624.png)

Изменить пользователя на 3-го от имени `user1` не вышло, делал от `root`
![Pasted image 20250224131815.png](/img/user/Images/Pasted%20image%2020250224131815.png)

**3.5. Авторизуйтесь в системе под вторым пользователем (user2) и создайте директорию {user2}_share. Установите разрешения таким образом, чтобы второй пользователь мог делиться файлами с первым (user1) и отдельным (user3)**.

После долгих копаний создал от лица `user2` папку `user2_share`
![Pasted image 20250224142112.png](/img/user/Images/Pasted%20image%2020250224142112.png)

Даём возможность пользователям группы `user1` и другим `user3` читать файлы.
![Pasted image 20250303124652.png](/img/user/Images/Pasted%20image%2020250303124652.png)


**3.6. Создайте файл sensetive_data от имени второго пользователя (user2) и запишите в него какую-либо текстовую информацию. Уберите разрешения для группы и всех остальных.**

Создали файл `sensetive_data` имени второго пользователя, далее записали в него какую-то текстовую информацию.
![Pasted image 20250303122956.png](/img/user/Images/Pasted%20image%2020250303122956.png)

Проверили наличие какого-то текста и убрали права пользователей группы и вне группы.
![Pasted image 20250303125010.png](/img/user/Images/Pasted%20image%2020250303125010.png)

Читаем файл с помощью `cat`. Нет прав на чтение файла. У нас их попросту нет, так как мы их отобрали на предыдущем шаге.
![Pasted image 20250303125303.png](/img/user/Images/Pasted%20image%2020250303125303.png)

Читаем файл с помощью `vi` - файл пустой. Потому что у нас нет прав на его редактирование и чтение.
![Pasted image 20250303125206.png](/img/user/Images/Pasted%20image%2020250303125206.png)

Ставим `SUID bit` на `vi` через `busybox` от лица `root`.
![Pasted image 20250303131234.png](/img/user/Images/Pasted%20image%2020250303131234.png)

Установить SUID не удалось. Прав на чтение через `cat` нет, аналогично через `vi` редактировать не можем.
![Pasted image 20250303132114.png](/img/user/Pasted%20image%2020250303132114.png)

Устанавливаем `vim` через `apk add vim`, от рута выполняем `chmod u+s /usr/bin/vim`, заходим под пользователем `user3` через `su user3`, читаем файл vim `sensetive_data`.
Все успешно читается. Просто у `busybox` порезаны права, поэтому чтение не удавалось.
![Pasted image 20250303134002.png](/img/user/Pasted%20image%2020250303134002.png)

