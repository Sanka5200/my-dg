---
{"dg-publish":true,"permalink":"/paszi/laboratornaya-rabota-2/","noteIcon":""}
---


# Linux Access Control List
---

**ФИО:** 2022-ФГиИБ-ИБ-1б Кубицкий Александр Андреевич

---
Представьте себе систему, в которой есть следующие пользователи:

- student01;
- student02;
- student03;
- student04;
- student05;
- student06;

Все эти пользователи - студенты одной конкретной группы.

Причем, **student01** и **student02** ответственны за администрирование компьютера, поэтому являются членами группы **sysop** (system operator).
![Pasted image 20250303142950.png](/img/user/Pasted%20image%2020250303142950.png)

Права на директории.
![Pasted image 20250303143228.png](/img/user/Pasted%20image%2020250303143228.png)

Пользователь **student03** создает файл _student03.script.sh_.
![Pasted image 20250303143558.png](/img/user/Pasted%20image%2020250303143558.png)

После выполнения команды `ls -l` мы видим следующие права:

```
-rwxr-xr-- 1 student03 sysop  44 окт 25 19:36  student03.script.sh
```

---

**Воссоздайте эту ситуацию**.
Воссоздал, проверил от лиц `root` и `student3`.
![Pasted image 20250303144127.png](/img/user/Pasted%20image%2020250303144127.png)

---

Мы хотим дать пользователю **student04** права на чтение и запись (но не исполнение).

_Почему мы не можем это сделать?_
Чтобы дать `student04` права на чтение и запись, нужно:
- Либо сменить владельца группы - по заданию так нельзя.
- Либо поместить `student04` в группу, у которой эти права есть, например, в группу `sysop` - тоже нельзя, так как там по заданию только `student1` и `student2`.
- Либо дать доступ к файлу всем пользователям, что нарушит правила безопасности.
### 1.Установка acl

Установите и изучите возможности `acl` с помощью следующих команд:

```
apk add acl
getfacl -h
setfacl -h
```
![Pasted image 20250303145404.png](/img/user/Pasted%20image%2020250303145404.png)
### 2. Практика

**2.1. Изучите с помощью getfacl права файла student03.script.sh**
![Pasted image 20250303150628.png](/img/user/Pasted%20image%2020250303150628.png)

**2.2. С помощью setfacl предоставьте пользователь student04 права на чтение и запись скрипты student03.script.sh**.
![Pasted image 20250303151452.png](/img/user/Pasted%20image%2020250303151452.png)

**2.3. В дополнение к трём пользователям из ЛР01, создайте ещё двух пользователей (user4, user5). Затем создайте ещё одну группу (напр. group2) и поместите в неё новых пользователей (user4, user5).**
![Pasted image 20250303151959.png](/img/user/Pasted%20image%2020250303151959.png)

**2.4. Внутри директории пользователя user5 создайте от его имени директорию important_files**.
![Pasted image 20250303152506.png](/img/user/Pasted%20image%2020250303152506.png)
**Есть ли разница между выводом `ls -l` и `getfacl`?**
Разницы нет, просто более подробные права при использовании `getfacl`.

**2.5. Зайдите под четвертым (user4) (относительно пользователей из ЛР01) и выполните следующие действия:**

- Попытайтесь добавить новую директорию внутри _important_files_. Можете ли вы это сделать? Почему?
![Pasted image 20250303152932.png](/img/user/Pasted%20image%2020250303152932.png)
Не можем, так как другие пользователи могут только читать и исполнять файлы внутри директории *important_files*.

- Добавьте новое **ACL** правило для директории _important_files_ такое, чтобы четвёртый пользователь (user4) имел права `rwx`;
![Pasted image 20250303153723.png](/img/user/Pasted%20image%2020250303153723.png)
- Есть ли разница между выводом `ls -l` и `getfacl` для _important_files_? Почему?
![Pasted image 20250303154004.png](/img/user/Pasted%20image%2020250303154004.png)
Разница есть, так как `ls` отображает права по умолчанию, а `getfacl` те же права +свои собственные.

- Попытайтесь добавить новую директорию снова от имени четвёртого пользователя (**user4**) внутри _important_files_. Можете ли вы это сделать? Почему?
![Pasted image 20250303154306.png](/img/user/Pasted%20image%2020250303154306.png)
Мы можем это сделать, так как на предыдущем скрине выдали права по записи и изменения директории _important_files_ для `user4`.

**2.6. Авторизуйтесь под именем пятого пользователя (user5) и выполните следующие действия:**

- Попытайтесь создать какой-нибудь файл внутри директории четвёртого пользователя из предыдущего шага. Можете ли вы это сделать? Почему?
- Добавьте новое **ACL** правило для директории _important_files_ такое, чтобы группа из четвёртого и пятого пользователя (group2) имела права `rwx`;
- Попытайтесь создать какой-нибудь файл внутри директории четвёртого пользователя из предыдущего шага. Можете ли вы это сделать? Почему?

**2.7. Снова авторизуйтесь под именем чётвертого пользователя (user4) и создайте какой-либо файл в своей директории внутри _important_files_. Выполните следующие действия:**

- Авторизуйтесь под пятым пользователем (**user5**). Можете ли вы отредактировать созданный файл? Почему?
    
- Добавьте новое **ACL** правило, которое разрешало бы пользователям второй группы (**group2**) редактировать любые файлы внутри директории четвёртого пользователя (**user4**) внутри **important_files**;
    
- Снова от имени четвёртого пользователя (**user4**) создайте в описываемой директории новый файл;
    
- Может ли теперь пятый пользователь (user5) редактировать эти файлы? Какие? Почему?
    

**2.8. Покажите все созданные вами правила для второй группы (group2, внутри которой четвёртый и пятый пользователи). Затем, удалите все эти правила.**

**2.9. Авторизуйтесь по четвертым пользователем (user4). Создайте третий файл внутри своей директории внутри _important_files_**.

**2.10. Может ли теперь пятый пользователь (user5) редактировать файлы внутри директории четвёртого пользователя? Какие? Почему?**

**2.11. Удалите все ACL правила для директории четвёртого пользователя, затем повторите предыдущий шаг. Что изменилось? Почему?**.